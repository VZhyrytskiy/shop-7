
<section class="cart-products p-3 container-fluid">
  <div class="d-flex w-100 px-5">
    <i class="cart-products__icon fas fa-shopping-basket mr-3"></i>

    <div class="w-100 d-flex flex-wrap align-items-center">
      <ng-container *ngIf="(cartProducts$ | async).length; else noProducts">
        <div class="d-flex justify-content-between w-100">
          <sh-cart-list
            class="d-flex flex-wrap flex-grow-1 w-50 pr-3"
            [cartProducts]="cartProducts$ | async | shOrderBy : orderBy.field : orderBy.desc"
            (delete)="onDeleteProductFromCart($event)"
            (changeCount)="onChangeCount($event)"
          ></sh-cart-list>

          <div class="mt-3 w-50">
            <sh-select
              label="Order by:"
              [initial]="orderBy.field"
              [options]="productOptions"
              (selected)="onFieldNameChanged($event)"
              class="mr-3 d-inline-block"></sh-select>

            <sh-select
              [initial]="Order.DESC"
              [options]="orderByOptions"
              (selected)="onOrderByChanged($event)"
              class="d-inline-block"></sh-select>

            <button
              class="btn btn-primary btn-sm ml-3 mb-1"
              (click)="onClear()"
            >Clear all</button>

            <div>
              <span *ngIf="(totalCount$ | async) as totalCount">
                You are selected
                <span class="text-warning">
                  {{ totalCount | i18nPlural : itemPluralMapping }}
                </span>
              </span>

              <span class="mx-4">
                Total amount: <span class="text-warning"> {{ totalAmount$ | async  | currency }}</span>
              </span>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-template #noProducts>
        <i class="d-block text-center"
           color="darkslategrey"
           shPretty
        >
          Your card is empty.
        </i>
      </ng-template>
      </div>
    </div>
</section>
